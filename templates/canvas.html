<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<style>
body, html { 
    height:100%; 
}
#main-canvas {
    margin: 0; 
    padding: 0;
    position:absolute;
    width:100%;
    height:100%;
}
</style>
<!-- inclusion order matters -->
<script src="../static/utils.js"></script>
<!-- define primitives here -->
<script src="../static/Line.js"></script>
<script src="../static/RectangularControlPoints.js"></script>
<script src="../static/Group.js"></script>

<!-- All XMB front-end and back-end files -->
<link rel="stylesheet" type="text/css" href="../static/XMB.css" />
<script src="../static/XMB.js"></script>
<script src="../static/underscore-min.js"></script>
<script src="../static/underscore.js"></script>
<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.4/underscore-min.js"></script>

<!-- user interface here -->
<script src="../static/BarMenu.js"></script>

<!-- main application here -->
<script src="../static/Controller.js"></script>
<script src="../static/Model.js"></script>
<script src="../static/App.js"></script>

<script type="text/javascript">
// for rendering html in canvas:
// https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Drawing_DOM_objects_into_a_canvas
var g_app;

function reset_canvas_size() {
    $("#main-canvas").attr("width" , $(window).width ().toString());
    $("#main-canvas").attr("height", $(window).height().toString());
}
$(window).on('resize', function(){
    reset_canvas_size();
});
$(document).ready(function() {
    reset_canvas_size();
    start_app();
    $(document).keydown  (function(event) { g_app.key_press  (event.keyCode); });
    $(document).keyup    (function(event) { g_app.key_release(event.keyCode); });
    $(document).mousemove(function(event) { g_app.mouse_move({ x: event.pageX, y: event.pageY }); });
    $(document).mousedown(function(event) { g_app.mouse_click  (); });
    $(document).mouseup  (function(event) { g_app.mouse_release(); });
    //g_app.set_listen_target("/static/input.json");
});
</script>

</head>
<body>
<canvas id="main-canvas"></canvas><!--<br />
<span id="debug-message-1"></span><br />
<span id="debug-message-2"></span>-->

<div id="myNav" class="overlay">
  <iframe class="bg" src="http://fenwick67.github.io/xmb/?test"></iframe>
    <h1 class="top">XMB</h1>
    <div id="xmb-contain">
      <div id="xmb">
        <ul>
          <li class="column" v-for="column,index in columns" v-bind:class="{active:column.active}" v-bind:style="{left:column.position.x+'px'}">
            <div class="cell" v-bind:class="{active:column.active}" v-on:click="highlightCell(column.index,0)"><i class="material-icons xmb-icon">{{column.icon}}</i>
              <label>{{column.title}}</label>
            </div>
            <ul>
              <li class="cell submenu" v-for="item,itemIndex in column.items" v-bind:class="{active:item.active}" v-bind:style="{top:item.position.y+'px'}" v-on:click="highlightCell(column.index,itemIndex)">           <a v-bind:href="item.active?item.href||'#missinglink':'#'"><i class="material-icons xmb-icon">{{item.icon}}</i>
                  <label>{{item.title}}
                    <label class="subtitle">{{item.subtitle}}</label>
                  </label></a></li>
            </ul>
          </li>
        </ul>
      </div>
    </div>
</div>

</body>
</html>
